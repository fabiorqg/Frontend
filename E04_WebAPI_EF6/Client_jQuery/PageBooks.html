<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Consuming web API From jQuery - Books</title>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>

    <script>

        $(document).ready(function () {

            // vai ser chamada a ação getAuthors da web api

            var ulBooks = $('#ulBooks');
            $('#buttonGetBooks').click(function () {
                $.ajax({
                    type: 'GET',
                    url: "/api/book/getbooks",
                    dataType: 'json',
                    success: function (data) {
                        ulBooks.empty();
                        $.each(data, function (index, val) {
                            ulBooks.append('<li> Book: ' + val.Id + ', ' + val.Title + ', ' + val.Year + ', ' + val.Price + '€' + '</li>');
                        });
                    }
                });
            });
            $('#buttonClearBooks').click(function () {
                ulBooks.empty();
            });

        }); // ponto e virgula não é obrigatorio. Mas pode usar-se caso tenha outro bloco a seguir.

    </script>
</head>
<body>
    <div>
        <input id="buttonGetBooks" type="button" value="Get All Books" />
        <input id="buttonClearBooks" type="button" value="Clear Books" />
        <br />
        <ul id="ulBooks" />
    </div>

</body>
</html>